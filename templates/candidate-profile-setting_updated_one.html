{% extends "base.html" %}
 {% load static %}
  {% block content %}


<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="position-relative">
                    <div class="candidate-cover position-relative">
                        <img id="coverPhotoPreview" 
                             src="{% if cover_photo %}{{ cover_photo }}{% else %}{% static 'images/hero/bg5.jpg' %}{% endif %}" 
                             class="img-fluid rounded shadow" 
                             alt="Cover Photo">
                        <div class="cover-photo-upload position-absolute top-0 end-0 m-2" 
                             style="z-index: 100; display: flex; align-items: center; justify-content: center;">
                            <label for="uploadCoverPhoto" class="cursor-pointer" 
                                   style="z-index: 10; display: inline-block;">
                                <i data-feather="camera" 
                                   style="width: 2.5rem; height: 2.5rem; color: white; background: rgba(0, 0, 0, 0.5); padding: 0.7rem; border-radius: 50%;"></i>
                            </label>
                            <input type="file" id="uploadCoverPhoto" class="d-none" accept="image/*">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="rounded shadow p-4">
                    <form id="ArtistDetailsForm">
                        <h5>Personal Details:</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">
                                        Title:<span class="text-danger">*</span>
                                    </label>
                                    <!-- Change the select to an input field -->
                                    <input type="text" name="title" id="title" class="form-control" placeholder = "Mr, Mrs, Dr, Prof, .......etc." required value="{{ additional_info.title|default:'' }}">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Full Name:<span class="text-danger" >*</span></label>
                                    <input name="fullname" id="fullname" type="text" class="form-control"  value="{{ additional_info.fullname|default:'' }}" maxlength="30"required>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">
                                        Pen Name/Short Name:<span class="text-danger">*</span>
                                    </label>
                                    <input name="penname" id="penname" type="text" class="form-control" maxlength="15" value="{{ additional_info.penname|default:'' }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Gender:<span class="text-danger" >*</span></label>
                                    <select class="form-control form-select" id="gender" required>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                                <option value="Other">Other</option>
                                            </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Date of Birth:<span class="text-danger" required>*</span></label>
                                    <input name="dob" id="dob" value="{{ additional_info.dob|date:'Y-m-d' }}" type="date" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Phone Number:<span class="text-danger">*</span></label>
                                    <input name="phone" id="phone" value="{{ user.contact_number }}" type="text" maxlength="12" class="form-control" placeholder="Phone Number" required pattern="^[0-9]{10,12}$" title="Please enter a valid phone number" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Email Address:<span class="text-danger">*</span></label>
                                    <input name="email" id="email2" type="email" value="{{ user.email }}" class="form-control" maxlength="30" placeholder="Email Address" required>
                                </div>
                            </div>
                           
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Profile Picture:</label>
                                    <input name="profile_picture" id="profile_picture" type="file" class="form-control" accept="image/*" onchange="updateProfilePictureName()">
                                    {% if additional_info.profile_picture %}
                                    <img id="hiddenProfilePicturePreview" 
                                    src="{{ additional_info.profile_picture.url }}" 
                                    style="display: none;" 
                                    alt="Profile Picture">
                               
                                    <p id="profile-picture-name">
                                        <a href="{{ additional_info.profile_picture.url }}" target="_blank" style="text-decoration: none;">
                                            {{ additional_info.profile_picture.name }}
                                        </a>
                                    </p>
                                {% endif %}
                                </div>
                            </div>
                           
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;" for="houseNumber">Address 1:<span class="text-danger" >*</span></label>
                                    <input type="text" value="{{ additional_info.address1|default:'' }}"  name="houseNumber" id="houseNumber" class="form-control" maxlength="50" placeholder="e.g.,House Number/Building Name">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;" for="roadName">Address 2:<span class="text-danger" >*</span></label>
                                    <input type="text" value="{{ additional_info.address2|default:'' }}" name="roadName" id="roadName" class="form-control" maxlength="100" placeholder="e.g., Road Name/Area/Colony" >
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" for="state" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Address 3:<span class="text-danger" >*</span></label>
                                    <input type="text"  value="{{ additional_info.state|default:'' }}" name="state" id="state" class="form-control" maxlength="50" placeholder="e.g.,District,City,State">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;" for="pincode">Pincode:</label>
                                    <input type="text" value="{{ additional_info.pincode|default:'' }}" name="pincode" id="pincode" class="form-control" maxlength="8" placeholder="e.g., 123456" pattern="\d{6}">
                                </div>
                            </div>
                            
                            
                           
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Location:<span class="text-danger" >*</span></label>
                                    <select class="form-control form-select" value="{{ additional_info.country|default:'' }}" id="Country">
                                                <option value="India">India</option>
                                                <option value="USA">USA</option>
                                                <option value="Canada">Canada</option>
                                                <option value="UK">UK</option>
                                                <option value="Australia">Australia</option>
                                            </select>
                                   </div>
                                </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Role in Literary World:<span class="text-danger" >*</span></label>
                                    <select class="form-control form-select" id="description"  required>
                                        <option value="Writer" {% if additional_info.description == "Writer" %}selected{% endif %}>Writer</option>
                                        <option value="Publisher" {% if additional_info.description == "Publisher" %}selected{% endif %}>Publisher</option>
                                        <option value="Printer" {% if additional_info.description == "Printer" %}selected{% endif %}>Printer</option>
                                        <option value="Editor" {% if additional_info.description == "Editor" %}selected{% endif %}>Editor</option>
                                        <option value="Artist" {% if additional_info.description == "Artist" %}selected{% endif %}>Artist</option>
                                        <option value="Digital Graphics Designer" {% if additional_info.description == "Digital Graphics Designer" %}selected{% endif %}>Digital Graphics Designer</option>
                                        <option value="Digital Content Creator" {% if additional_info.description == "Digital Content Creator" %}selected{% endif %}>Digital Content Creator</option>
                                        <option value="Spiritual Leader" {% if additional_info.description == "Spiritual Leader" %}selected{% endif %}>Spiritual Leader</option>
                                        <option value="Social Media Influencer" {% if additional_info.description == "Social Media Influencer" %}selected{% endif %}>Social Media Influencer</option>
                                        <option value="Digital Marketer" {% if additional_info.description == "Digital Marketer" %}selected{% endif %}>Digital Marketer</option>
                                        <option value="Public Relations Manager" {% if additional_info.description == "Public Relations Manager" %}selected{% endif %}>Public Relations Manager</option>
                                        <option value="Event Manager" {% if additional_info.description == "Event Manager" %}selected{% endif %}>Event Manager</option>
                                        <option value="Entertainment Troupe Owner" {% if additional_info.description == "Entertainment Troupe Owner" %}selected{% endif %}>Entertainment Troupe Owner</option>
                                        <option value="Standup Comedian" {% if additional_info.description == "Standup Comedian" %}selected{% endif %}>Standup Comedian</option>
                                        <option value="Compere/Emcee" {% if additional_info.description == "Compere/Emcee" %}selected{% endif %}>Compere/Emcee</option>
                                        <option value="Book Store Owner" {% if additional_info.description == "Book Store Owner" %}selected{% endif %}>Book Store Owner</option>
                                        <option value="Digital Marketplace/Platform" {% if additional_info.description == "Digital Marketplace/Platform" %}selected{% endif %}>Digital Marketplace/Platform</option>
                                        <option value="Poet" {% if additional_info.description == "Poet" %}selected{% endif %}>Poet</option>
                                        <option value="Essayist" {% if additional_info.description == "Essayist" %}selected{% endif %}>Essayist</option>
                                        <option value="Blogger" {% if additional_info.description == "Blogger" %}selected{% endif %}>Blogger</option>
                                        <option value="Novelist" {% if additional_info.description == "Novelist" %}selected{% endif %}>Novelist</option>
                                        <option value="Columnist" {% if additional_info.description == "Columnist" %}selected{% endif %}>Columnist</option>
                                        <option value="Journalist" {% if additional_info.description == "Journalist" %}selected{% endif %}>Journalist</option>
                                        <option value="Short Story Writer" {% if additional_info.description == "Short Story Writer" %}selected{% endif %}>Short Story Writer</option>
                                        <option value="Motivational Speaker" {% if additional_info.description == "Motivational Speaker" %}selected{% endif %}>Motivational Speaker</option>
                                        <option value="Literary Critic" {% if additional_info.description == "Literary Critic" %}selected{% endif %}>Literary Critic</option>
                                        <option value="Literacy Reviewer" {% if additional_info.description == "Literacy Reviewer" %}selected{% endif %}>Literacy Reviewer</option>
                                        <option value="Lyricist" {% if additional_info.description == "Lyricist" %}selected{% endif %}>Lyricist</option>
                                        <option value="Scriptwriter-Drama" {% if additional_info.description == "Scriptwriter-Drama" %}selected{% endif %}>Scriptwriter-Drama</option>
                                        <option value="Scriptwriter-Screen" {% if additional_info.description == "Scriptwriter-Screen" %}selected{% endif %}>Scriptwriter-Screen</option>
                                        <option value="Translator" {% if additional_info.description == "Translator" %}selected{% endif %}>Translator</option>
                                        </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Gallery:</label>
                                    <input
                                        name="documents[]"
                                        id="documents"
                                        type="file"
                                        class="form-control"
                                        accept="image/*"
                                        multiple
                                    >
                                <small class="form-text text-muted">You can select multiple image files.</small>
        
        <!-- File names will be displayed here -->
        {% if additional_info.images.all %}
        <ul id="file-list" class="mt-2 list-unstyled" style="font-family: Arial, sans-serif; font-size: 14px; color: #333; padding-left: 0;">
                            {% for images in additional_info.images.all %}
           
<li style="margin-bottom: 2px;">
                <a href="{{ images.file_name.url }}" target="_blank" >
                    {{ images.file_name.name }}
                </a>
                <img class="hidden-preview" 
                src="{{ images.file_name.url }}" 
                style="display:none;" 
                data-file-name="{{ images.file_name.name }}" 
                data-file-url="{{ images.file_name.url }}" 
                alt="Existing File Preview">
                <button type="button" class="remove-image-btn" 
                style="border: none; background: transparent; color: red; cursor: pointer;" 
                data-image-id="{{ images.id }}" 
                title="Remove image">
            âœ–
        </button>
            </li>          
            {% endfor %}
        </ul>
        {% comment %} {% else %}
            <ul id="file-list" class="mt-2 list-unstyled" style="font-family: Arial, sans-serif; font-size: 14px; color: #333; padding-left: 0;">
                <!-- Dynamically added file names will appear here -->
            </ul> {% endcomment %}
        {% endif %}
    </div>
</div>
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Short Bio:</label>
                                    <textarea name="short_bio"  id="short_bio" class="form-control" maxlength="85" placeholder="Brief description of your professional background">{{ additional_info.short_bio|default:'' }}</textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Brief Introduction:</label>
                                    <textarea name="introduction" id="introduction"  rows="4" maxlength="500" class="form-control" placeholder="Write a brief introduction about yourself..." >{{ additional_info.introduction|default:'' }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Languages:<span class="text-danger" >*</span></label>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Language</th>
                                                <th>Read</th>
                                                <th>Write</th>
                                                <th>Speak</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>English</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'English' in additional_info.languages_read %}checked{% endif %} value="English"></td>
                                                <td><input type="checkbox" name="languages_write[]"  {% if 'English' in additional_info.languages_write %}checked{% endif %} value="English"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'English' in additional_info.languages_speak %}checked{% endif %}  value="English"></td>
                                            </tr>
                                            <tr>
                                                <td>Hindi</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Hindi' in additional_info.languages_read %}checked{% endif %}  value="Hindi"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Hindi' in additional_info.languages_write %}checked{% endif %}  value="Hindi"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Hindi' in additional_info.languages_speak %}checked{% endif %}  value="Hindi"></td>
                                            </tr>
                                            <tr>
                                                <td>Odia</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Odia' in additional_info.languages_read %}checked{% endif %}  value="Odia"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Odia' in additional_info.languages_write %}checked{% endif %}  value="Odia"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Odia' in additional_info.languages_speak %}checked{% endif %}  value="Odia"></td>
                                            </tr>
                                            <tr>
                                                <td>Telugu</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Telugu' in additional_info.languages_read %}checked{% endif %}  value="Telugu"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Telugu' in additional_info.languages_write %}checked{% endif %}  value="Telugu"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Telugu' in additional_info.languages_speak %}checked{% endif %}  value="Telugu"></td>
                                            </tr>
                                            <tr>
                                                <td>Tamil</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Tamil' in additional_info.languages_read %}checked{% endif %}  value="Tamil"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Tamil' in additional_info.languages_write %}checked{% endif %}  value="Tamil"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Tamil' in additional_info.languages_speak %}checked{% endif %}  value="Tamil"></td>
                                            </tr>
                                            <tr>
                                                <td>Kannada</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Kannada' in additional_info.languages_read %}checked{% endif %}  value="Kannada"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Kannada' in additional_info.languages_write %}checked{% endif %}  value="Kannada"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Kannada' in additional_info.languages_speak %}checked{% endif %}  value="Kannada"></td>
                                            </tr>
                                            <tr>
                                                <td>Malayalam</td>
                                                <td><input type="checkbox" name="languages_read[]" {% if 'Malayalam' in additional_info.languages_read %}checked{% endif %}  value="Malayalam"></td>
                                                <td><input type="checkbox" name="languages_write[]" {% if 'Malayalam' in additional_info.languages_write %}checked{% endif %}  value="Malayalam"></td>
                                                <td><input type="checkbox" name="languages_speak[]" {% if 'Malayalam' in additional_info.languages_speak %}checked{% endif %}  value="Malayalam"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Social Media Links:</label>
                                    <div class="d-flex flex-column">
                                        <div class="mb-2 d-flex align-items-center">
                                            <i data-feather="facebook" class="fea icon-sm align-middle me-2" title="facebook"></i>
                                            <input type="url" class="form-control" value="{{ additional_info.facebook_link|default:'' }}" id="facebook_link" maxlength="100" placeholder="Facebook URL" >
                                        </div>
                                        <div class="mb-2 d-flex align-items-center">
                                            <i data-feather="instagram" class="fea icon-sm align-middle me-2" title="instagram"></i>
                                            <input type="url" class="form-control" id="instagram_link"  value="{{ additional_info.instagram_link|default:'' }}" maxlength="100" placeholder="Instagram URL" >
                                        </div>
                                        <div class="mb-2 d-flex align-items-center">
                                            <i data-feather="twitter" class="fea icon-sm align-middle me-2" title="Twitter"></i>
                                            <input type="url" class="form-control" id="twitter_link" value="{{ additional_info.twitter_link|default:'' }}" maxlength="100" placeholder="Twitter URL" >
                                        </div>
                                        <div class="mb-2 d-flex align-items-center">
                                            <i data-feather="linkedin" class="fea icon-sm align-middle me-2" title="linkedin"></i>
                                            <input type="url" class="form-control" id="linkedin_link" value="{{ additional_info.linkedin_link|default:'' }}" maxlength="100" placeholder="LinkedIn URL" >
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                            <h5>Professional Details:</h5>
                            <div class="row g-3">
                            {% comment %} <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Professional Title:</label>
                                    <input name="job_title" id="job_title" value="{{ additional_info.job_title|default:'' }}" type="text" class="form-control" maxlength="30" placeholder="Professional Title" >
                                </div>
                            </div> {% endcomment %}
                            {% comment %} <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Company / Organization (if applicable):</label>
                                    <input name="company_name" id="company_name" value="{{ additional_info.company_name|default:'' }}" type="text" class="form-control"  maxlength="30" placeholder="Company / Organization" >
                                </div>
                            </div> {% endcomment %}
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Years of Experience:</label>
                                    <input name="experience" id="experience" type="text" class="form-control"  placeholder="Years of Experience" readonly>
                                </div>
                            </div>
                            
                                <!-- Experience list -->
                                <div class="col-lg-12">
                                <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Experience List:</label>
                                <ul id="experienceList" class="list-group">       
                                  </ul>
                                
                            </div>
                            <div class="col-lg-12">
                                <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#experienceModal" onclick="openAddModal()">
                                    Add Experience
                                </button>
                            </div>
                            <div class="col-lg-12">
                                <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Education List:</label>
                                <ul id="educationList" class="list-group">
                                </ul>
                            </div>
                            <div class="col-lg-12">
                                <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#educationModal" onclick="openAddEducationModal()">
                                    Add Education
                                </button>
                            </div>
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Books Published:</label>
                                    <div id="booksPublishedSection">
                                        {% for book in books %}
                                        <div class="book-entry mb-2" data-book-id="{{ book.id }}">
                                            <input type="text" name="existing_book_name[]" class="form-control mb-1" value="{{ book.book_name }}" maxlength="85" readonly >
                                            <input type="url" name="existing_book_link[]" class="form-control mb-1"  value="{{ book.book_url }}" readonly >
                                            <input type="text" name="existing_book_category[]" class="form-control mb-1"  value="{{ book.book_category }}" readonly >
                                            <input type="text" name="existing_book_chapter_name[]" class="form-control mb-1"  value="{{ book.book_chapter_name }}" readonly >
                                            <input type="text" name="existing_book_page_no[]" class="form-control mb-1"  value="{{ book.book_page_no }}" readonly >
                                            <input type="text" name="existing_book_publisher[]" class="form-control mb-1"  value="{{ book.book_publisher }}" readonly >
                                            <input type="text" name="existing_book_editor[]" class="form-control mb-1"  value="{{ book.book_editor }}" readonly >

                                            {% for book in book.book_images.all %}
                                            <small>Current Book Image: <a href="{{ book.book_image.url }}" target="_blank">{{ book.book_image }}</a></small><br>
                                            <input type="hidden" name="existing_book_images[]" value="{{ book.book_image.url }}">
                                            {% endfor %}                                          
                                            <button type="button" class="remove-exisitng-book-btn btn btn-danger chrbtn-sm">Remove</button>
                                        </div>
                                        {% empty %}
                                        <div class="book-entry mb-2">
                                            <input type="text" name="book_name[]" class="form-control mb-1" placeholder="Enter book name" maxlength="85">
                                            <input type="url" name="book_link[]" class="form-control mb-1" placeholder="Enter book link">
                                            <input type="text" name="book_category[]" class="form-control mb-1" placeholder="Enter book category">
                                            <input type="text" name="book_chapter_name[]" class="form-control mb-1"  placeholder="Enter book chapter name">
                                            <input type="text" name="book_page_no[]" class="form-control mb-1"  placeholder="Enter book page no">
                                            <input type="text" name="book_publisher[]" class="form-control mb-1" placeholder="Enter book publisher">
                                            <input type="text" name="book_editor[]" class="form-control mb-1"  placeholder="Enter book editor">
                                         <input type="file" name="book_images[]" class="form-control mb-1" accept="image/*" multiple>

                                            <button type="button" class="remove-book-btn btn btn-danger btn-sm">Remove</button>
                                        </div>
                                    {% endfor %}
                                    </div>
                                    <button type="button" id="addBookBtn" class="btn btn-primary btn-sm mt-2">Add A Book</button>
                                </div>
                            </div>
                            
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Portfolio Links / Website:</label>
                                    <input name="portfolio" id="portfolio" value="{{ additional_info.portfolio|default:'' }}" type="url" class="form-control" maxlength="50" placeholder="Portfolio URL">
                                </div>
                            </div>
                            
                            {% comment %} <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Availability:</label>
                                    <select name="availability" id="availability" class="form-control">
                                                    <option value="full_time">Full-time</option>
                                                    <option value="part_time">Part-time</option>
                                                    <option value="freelance">Freelance</option>
                                                </select>
                                </div>
                            </div> {% endcomment %}
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Skills:<span class="text-danger" >*</span></label>
                                    <div id="custom-multi-select" style="display: flex; flex-wrap: wrap; gap: 10px;" required>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Writer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"> Writer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Publisher" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;" {% if 'Publisher ' in skills %}checked{% endif %}> Publisher
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Printer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;" {% if 'Printer' in skills %}checked{% endif %}> Printer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Editor" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;" {% if 'Editor' in skills %}checked{% endif %}> Editor
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Artist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;" {% if 'Artist' in skills %}checked{% endif %}> Artist
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Digital Graphics Designer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Digital Graphics Designer' in skills %}checked{% endif %}> Digital Graphics Designer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Digital Content Creator" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Digital Content Creator' in skills %}checked{% endif %}> Digital Content Creator
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Spiritual Leader" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Spiritual Leader' in skills %}checked{% endif %}> Spiritual Leader
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Social Media Influencer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Social Media Influencer' in skills %}checked{% endif %}> Social Media Influencer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Digital Marketer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Digital Marketer' in skills %}checked{% endif %}> Digital Marketer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Public Relations Manager" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Public Relations Manager' in skills %}checked{% endif %}> Public Relations Manager
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Event Manager" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Event Manager' in skills %}checked{% endif %}> Event Manager
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Entertainment Troupe Owner" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Entertainment Troupe Owner' in skills %}checked{% endif %}> Entertainment Troupe Owner
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Standup Comedian" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Standup Comedian' in skills %}checked{% endif %}> Standup Comedian
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Compere/Emcee" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Compere/Emcee' in skills %}checked{% endif %}> Compere/Emcee
                                        </label>
                                        
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Book Store Owner" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Book Store Owner' in skills %}checked{% endif %}> Book Store Owner
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Digital Marketplace/Platform" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Digital Marketplace/Platform' in skills %}checked{% endif %}> Digital Marketplace/Platform
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Poet" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Poet' in skills %}checked{% endif %}> Poet
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Essayist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Essayist' in skills %}checked{% endif %}> Essayist
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Blogger" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Blogger' in skills %}checked{% endif %}> Blogger
                                        </label>

                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Novelist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Novelist' in skills %}checked{% endif %}> Novelist
                                        </label>
                                       
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Columnist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Columnist' in skills %}checked{% endif %}> Columnist
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Journalist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Journalist' in skills %}checked{% endif %}> Journalist
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Short Story Writer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Short Story Writer' in skills %}checked{% endif %}> Short Story Writer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Motivational Speaker" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"> Motivational Speaker
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Literary Critic" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Literary Critic' in skills %}checked{% endif %}> Literary Critic
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Literacy Reviewer" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Literacy Reviewer' in skills %}checked{% endif %}> Literacy Reviewer
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Lyricist" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Lyricist' in skills %}checked{% endif %}> Lyricist
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Scriptwriter-Drama" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Scriptwriter-Drama' in skills %}checked{% endif %}> Scriptwriter-Drama
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Scriptwriter-Screen" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Scriptwriter-Screen' in skills %}checked{% endif %}> Scriptwriter-Screen
                                        </label>
                                        <label style="display: flex; align-items: center;">
                                            <input type="checkbox" value="Translator" class="skill-checkbox" style="margin-right: 4px; vertical-align: middle;"{% if 'Translator' in skills %}checked{% endif %}> Translator
                                        </label>
                                    </div>
                                    <small class="text-muted">You can select up to 6 skills.</small>
                                </div>
                            </div>
                            
                            
                            
                            
                            <script>


                                // Limit selection to 6 checkboxes
                                const checkboxes = document.querySelectorAll('.skill-checkbox');
                                checkboxes.forEach((checkbox) => {
                                    checkbox.addEventListener('change', function () {
                                        const selectedCheckboxes = document.querySelectorAll('.skill-checkbox:checked');
                                        if (selectedCheckboxes.length > 6) {
                                            alert("You can only select up to 6 skills.");
                                            this.checked = false; 
                                        }
                                    });
                                });

                                 document.getElementById("documents").addEventListener("change", function () {
                                    const files = this.files;
                                    const fileList = document.getElementById("file-list");
                                    const formData = new FormData();
                                    const add_id = {{ additional_info.id }} 
                                    console.log('additional_info_id',add_id)
                                    for (let i = 0; i < files.length; i++) {
                                        formData.append("documents[]", files[i]);
                                    }
                                    formData.append("user_id", "{{ additional_info.id }}"); // Pass the user ID
                                
                                    fetch("/upload-gallery-image/", {
                                        method: "POST",
                                        body: formData,
                                    })
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.status === "success") {
                                          data.uploaded_images.forEach(image => {
                                                const listItem = document.createElement("li");
                                                listItem.style.marginBottom = "2px";
                                
                                                // Create link for image
                                                const link = document.createElement("a");
                                                link.href = image.file_url;
                                                link.target = "_blank";
                                                link.textContent = image.file_name;
                                
                                                // Create hidden preview image
                                                const previewImg = document.createElement("img");
                                                previewImg.className = "hidden-preview";
                                                previewImg.src = image.file_url;
                                                previewImg.style.display = "none";
                                                previewImg.dataset.fileName = image.file_name;
                                                previewImg.dataset.fileUrl = image.file_url;
                                                previewImg.alt = "Existing File Preview";
                                
                                                // Create remove button
                                                const removeButton = document.createElement("button");
                                                removeButton.classList.add('remove-image-btn')
                                                removeButton.type = "button";
                                                removeButton.style.border = "none";
                                                removeButton.style.background = "transparent";
                                                removeButton.style.color = "red";
                                                removeButton.style.cursor = "pointer";
                                                removeButton.textContent = "âœ–";
                                                removeButton.dataset.imageId = image.id;
                                                removeButton.title = "Remove image";
                                               
                                
                                                // Append elements to list item
                                                listItem.appendChild(link);
                                                listItem.appendChild(previewImg);
                                                listItem.appendChild(removeButton);
                                
                                                // Append list item to file list
                                                fileList.appendChild(listItem); 
                                            }); 
                                        } else {
                                            alert("Failed to upload images. Please try again.");
                                        }
                                    })
                                    .catch(error => {
                                        console.error("Error uploading files:", error);
                                    });
                                }); 

                                document.addEventListener('DOMContentLoaded', function() {
                                   
                                    document.getElementById('uploadCoverPhoto').addEventListener('change', function(event) {
                                        const file = event.target.files[0]; 
                                        if (file) {
                                            const reader = new FileReader(); 
                                            reader.onload = function(e) {
                                                const coverPhotoPreview = document.getElementById('coverPhotoPreview');
                                                if (coverPhotoPreview) {
                                  
                                                    coverPhotoPreview.src = e.target.result;
                                                }
                                            };
                                            reader.readAsDataURL(file); 
                                        }
                                    });
                                });

    function updateProfilePictureName() {
        const fileInput = document.getElementById('profile_picture');
        const previewImage = document.getElementById('hiddenProfilePicturePreview');

        const fileNameDisplay = document.getElementById('profile-picture-name');

        if (fileInput.files && fileInput.files[0]) {
            // Update the display with the new file name
            fileNameDisplay.textContent = fileInput.files[0].name;
        } else {
            // Reset the display if no file is selected (in case the user removes the file)
            fileNameDisplay.textContent = '';
        }
        
    }

 // Function to add a new book entry
document.getElementById('addBookBtn').addEventListener('click', function () {
    const bookEntries = document.querySelectorAll('.book-entry');
    let canAddBook = true;

    // Validate all existing entries
    bookEntries.forEach(entry => {
        // Check existing fields
        const existingBookName = entry.querySelector('input[name="existing_book_name[]"]');
        const existingBookLink = entry.querySelector('input[name="existing_book_link[]"]');
        const existingBookCategory = entry.querySelector('input[name="existing_book_category[]"]');
        const existingBookChapterName = entry.querySelector('input[name="existing_book_chapter_name[]"]');
        const existingPublisher = entry.querySelector('input[name="existing_book_publisher[]"]');
        const existingBookPageNo = entry.querySelector('input[name="existing_book_page_no[]"]');
        const existingBookEditor = entry.querySelector('input[name="existing_book_editor[]"]');
        const existingBookImages = entry.querySelector('input[name="existing_award_images[]"]');

       

        // Check new fields
        const bookName = entry.querySelector('input[name="book_name[]"]');
        const bookLink = entry.querySelector('input[name="book_link[]"]');
        const bookCategory = entry.querySelector('input[name="book_category[]"]');
        const bookChapterName = entry.querySelector('input[name="book_chapter_name[]"]');
        const bookPublisher= entry.querySelector('input[name="book_publisher[]"]');
        const bookEditor = entry.querySelector('input[name="book_editor[]"]');
        const bookPageNo = entry.querySelector('input[name="book_page_no[]"]');
        const awardImageFiles = entry.querySelector('input[name="award_images[]"]');

        // Validation logic for each entry
        if (
            (!existingBookName || existingBookName.value.trim() === '') &&
            (!bookName || bookName.value.trim() === '') // Either existing or new name should be filled
        ) {
            canAddBook = false;
        }

        if (
            (!existingBookLink || existingBookLink.value.trim() === '') &&
            (!bookLink || bookLink.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }

        if (
            (!existingBookCategory || existingBookCategory.value.trim() === '') &&
            (!bookCategory || bookCategory.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }
        if (
            (!existingBookChapterName || existingBookChapterName.value.trim() === '') &&
            (!bookChapterName || bookChapterName.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }
        if (
            (!existingPublisher || existingPublisher.value.trim() === '') &&
            (!bookPublisher || bookPublisher.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }
        if (
            (!existingBookEditor || existingBookEditor.value.trim() === '') &&
            (!bookEditor || bookEditor.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }
        if (
            (!existingBookPageNo || existingBookPageNo.value.trim() === '') &&
            (!bookPageNo || bookPageNo.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddBook = false;
        }

       
    });

    // If validation passes, allow adding a new book entry
    if (canAddBook) {
        const booksPublishedSection = document.getElementById('booksPublishedSection');
        const newBookEntry = document.createElement('div');
        newBookEntry.classList.add('book-entry', 'mb-2');

        newBookEntry.innerHTML = `
            <input type="text" name="book_name[]" class="form-control mb-1" placeholder="Enter book name" maxlength="85">
            <input type="url" name="book_link[]" class="form-control mb-1" placeholder="Enter book link">
            <input type="text" name="book_category[]" class="form-control mb-1" placeholder="Enter book category">
            <input type="text" name="book_chapter_name[]" class="form-control mb-1"  placeholder="Enter book chapter name">
            <input type="text" name="book_page_no[]" class="form-control mb-1"  placeholder="Enter book page no">
            <input type="text" name="book_publisher[]" class="form-control mb-1" placeholder="Enter book publisher">
            <input type="text" name="book_editor[]" class="form-control mb-1"  placeholder="Enter book editor">
            <input type="file" name="book_images[]" class="form-control mb-1" accept="image/*"  multiple>

            <button type="button" class="remove-book-btn btn btn-danger btn-sm">Remove</button>
        `;

        booksPublishedSection.appendChild(newBookEntry);
    } else {
        alert("Please ensure all fields (name, link,category,chapter name,page no,publisher,editor and image) are filled in existing entries before adding a new book.");
    }
});

document.getElementById('booksPublishedSection').addEventListener('click', function (e) {
    if (e.target && e.target.classList.contains('remove-book-btn')) {
        e.target.parentElement.remove();
    }
});



document.querySelectorAll('.remove-exisitng-book-btn').forEach(button => {
    button.addEventListener('click', function() {
        var bookEntry = this.closest('.book-entry');
        var bookId = bookEntry ? bookEntry.dataset.bookId : null;  // Get the book ID
        console.log("clicked")
        console.log(bookId)
        if (bookId) {
            $.ajax({
                url: `/remove-book/${bookId}/`, 
                type: 'DELETE', 
                headers: {
                    'Content-Type': 'application/json', 
                },
                success: function(response) {
                    bookEntry.remove();
                    console.log('Book removed successfully.');
                },
                error: function(xhr, status, error) {
                    console.error('Error removing book:', error);
                    alert('Failed to remove the book.');
                }
            });
        } else {
            console.error('Book ID is missing.');
        }
    });
});

document.addEventListener('DOMContentLoaded', function () {
    const removeButtons = document.querySelectorAll('.remove-image-btn');
    
    removeButtons.forEach(button => {
        button.addEventListener('click', function (e) {
            e.preventDefault();
            const imageId = this.getAttribute('data-image-id');
            const buttonElement = this;

            console.log(imageId);

            if (confirm("Are you sure you want to remove this image?")) {
                fetch(`/remove-image/${imageId}/`, {
                    method: 'DELETE', 
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error("Failed to remove the image.");
                    }
                })
                .then(data => {
                    alert(data.message || "Image removed successfully.");
                    buttonElement.parentElement.remove();
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("An error occurred while trying to remove the image.");
                });
            }
        });
    });
});


                        
    </script>
                            
                            
                            
                            
                            
                            {% comment %} <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Certifications:</label>
                                    <input type="text" id="certifications" value="{{ additional_info.certifications }}" class="form-control" maxlength="200" placeholder="Certifications">
                                </div>
                            </div> {% endcomment %}
                            {% comment %} <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label"style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Published Works / Projects:</label>
                                    <textarea name="published_works" id="published_works" maxlength="200" class="form-control" placeholder="Add details about published works (Title, Date, etc.)">{{ additional_info.published_works }}</textarea>
                                </div>
                            </div> {% endcomment %}
                            <div class="col-lg-12">
                                <div class="mb-3">
                                    <label class="form-label" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold;">Awards & Recognitions:</label>
                                    <div id="awardsSection">
                                        {% for award in awards %}
                                        <div class="award-entry mb-2" data-award-id="{{ award.id }}">
                                            <input type="text" name="existing_award_name[]" class="form-control mb-1" value="{{ award.award_name }}" maxlength="85" readonly >
                                            <input type="text" name="existing_award_year[]" class="form-control mb-1"  value="{{ award.award_year }}"  readonly >
                                            <input type="text" name="existing_award_category[]" class="form-control mb-1"  value="{{ award.award_category }}" readonly >
                                            <input type="text" name="existing_award_sub_category[]" class="form-control mb-1"  value="{{ award.award_sub_category }}" readonly >
                                            <input type="text" name="existing_award_by_organisation[]" class="form-control mb-1"  value="{{ award.award_by_organisation }}"  readonly >

                                            {% for image in award.images.all %}
                                            <small>Current Award Image: <a href="{{ image.award_image.url }}" target="_blank">{{ image.award_image }}</a></small><br>
                                            <input type="hidden" name="existing_award_images[]" value="{{ image.award_image.url }}">
                                            {% endfor %}
                                            
                                            <button type="button" class="remove-existing-award-btn btn btn-danger btn-sm">Remove</button>
                                        </div>
                                        {% empty %}
                                        <div class="award-entry mb-2">
                                            <input type="text" name="award_name[]" class="form-control mb-1" placeholder="Enter award name" maxlength="85">
                                            <input type="text" name="award_year[]" class="form-control mb-1" placeholder="Enter award year">
                                            <input type="text" name="award_category[]" class="form-control mb-1" placeholder="Enter award category">
                                            <input type="text" name="award_sub_category[]" class="form-control mb-1" placeholder="Enter award sub category">
                                            <input type="text" name="award_by_organisation[]" class="form-control mb-1" placeholder="Enter award by organisation">

                                            <input type="file" name="award_images[]" class="form-control mb-1" accept="image/*" multiple>
                                            <button type="button" class="remove-award-btn btn btn-danger btn-sm">Remove</button>
                                        </div>
                                    {% endfor %}
                                    </div>
                                    <button type="button" id="addAwardBtn" class="btn btn-primary btn-sm mt-2">Add An Award</button>
                                </div>
                            </div>



                            <div class="col-12">
                                <input type="submit" class=" btn btn-primary" value="Update Details">
                                <button type="button" class="btn btn-secondary" id="previewButton">Preview</button>
                            </div>
                        </div>
                    </form>
                </div>
               
                <div class="rounded shadow p-4 mt-4">
                    <h5>Others:</h5>
                    <form id="otherDetails">
                        <div class="row g-3">
                            {% comment %} <div class="mb-3">
                                <label class="form-label fw-semibold">Preferred Payment Method:</label>
                                <select class="form-control form-select" id="payment_method">
                                                <option value="paypal">PayPal</option>
                                                <option value="upi">UPI</option>
                                                <option value="bank_transfer">Bank Transfer</option>
                                            </select>
                            </div> {% endcomment %}
                            <div class="mb-3">
                                <label class="form-label fw-semibold">ID Verification (Aadhar Card - Front & Back) (Optional):</label>
                                <input type="file" class="form-control" id="aadhar_front" accept="image/*">
                                <input type="file" class="form-control mt-2" id="aadhar_back" accept="image/*">
                            </div>
                            {% comment %} <div class="mb-3">
                                <label class="form-label fw-semibold">Type of Opportunities:</label>
                                <select class="form-control form-select" id="opportunities">
                                                <option value="writing">Writing</option>
                                                <option value="publishing">Publishing</option>
                                                <option value="editing">Editing</option>
                                                <option value="consulting">Consulting</option>
                                            </select>
                            </div> {% endcomment %}
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Alternate Email ID:</label>
                                <input type="email" class="form-control" id="alternate_email" placeholder="Alternate Email ID">
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="newsletter_subscribe">
                                <label class="form-check-label" for="newsletter_subscribe">Subscribe to our Newsletter</label>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Change Password:</label>
                                <input type="password" class="form-control mb-2" id="old_password" placeholder="Old Password">
                                <input type="password" class="form-control mb-2" id="new_password" placeholder="New Password">
                                <input type="password" class="form-control" id="confirm_password" placeholder="Confirm Password">
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="hide_phone">
                                <label class="form-check-label" for="hide_phone">Hide my Phone Number</label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="hide_email">
                                <label class="form-check-label" for="hide_email">Hide my Email Address</label>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Contact Support:</label>
                                <a href="mailto:help@sarojaccrosian.com" class="d-block">help@sarojaccrosian.com</a>
                            </div>
                            {% comment %} <div class="mb-3">
                                <label class="form-label fw-semibold">Leave a Feedback / Report an Error:</label>
                                <textarea class="form-control" id="feedback" rows="4" placeholder="Your feedback or error report..."></textarea>
                            </div> {% endcomment %}
                            <div class="col-md-12">
                                <button id="submit3" class=" btn btn-primary" value="Update Details">Update Details</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="rounded shadow p-4 mt-4">
                    <form>
                        <h5 class="text-danger">Delete Account:</h5>
                        <div class="row mt-4">
                            <h6 class="mb-0">Do you want to delete your account? Please press the "Delete" button below.</h6>
                            <div class="mt-4">
                                <button class="btn btn-danger">Delete Account</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!----experience modal----->
    <div class="modal fade" id="experienceModal" tabindex="-1" aria-labelledby="experienceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="experienceModalLabel">Add/Edit Experience</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="experienceForm">
                        <input type="hidden" id="experienceId" value="">
                        <div class="mb-3">
                            <label for="designation" class="form-label">Designation</label>
                            <input type="text" id="designation" class="form-control" placeholder="Designation" maxlength="50" >
                        </div>
                        <div class="mb-3">
                            <label for="company" class="form-label">Company Name</label>
                            <input type="text" id="company" class="form-control" placeholder="Company Name" maxlength="50">
                        </div>
                        <div class="mb-3">
                            <label for="startDate" class="form-label">Start Date</label>
                            <input type="date" id="startDate" class="form-control" >
                        </div>
                        <div class="mb-3">
                            <label for="endDate" class="form-label">End Date</label>
                            <input type="date" id="endDate" class="form-control">
                        </div>
                        <div class="form-check mb-3">
                            <input type="checkbox" id="currentlyWorking" class="form-check-input" onchange="toggleEndDate()">
                            <label for="currentlyWorking" class="form-check-label">Currently Working</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveExperience()">Save</button>
                </div>
            </div>
        </div>
    </div>

<!----education modal----->
    <div class="modal fade" id="educationModal" tabindex="-1" aria-labelledby="educationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="educationModalLabel">Add/Edit Education</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="educationForm">
                        <input type="hidden" id="educationId" value="">
                        <div class="mb-3">
                            <label for="schoolInstitute" class="form-label">School/Institute Name</label>
                            <input type="text" id="schoolInstitute" class="form-control" placeholder="School/Institute Name" maxlength="100">
                        </div>
                        <div class="mb-3">
                            <label for="qualification" class="form-label">Qualification</label>
                            <input type="text" id="qualification" class="form-control" placeholder="Qualification" maxlength="50">
                        </div>
                        <div class="mb-3">
                            <label for="yearOfPassing" class="form-label">Year of Passing</label>
                            <input type="number" id="yearOfPassing" class="form-control" placeholder="Year of Passing" min="1900" max="2100">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveEducation()">Save</button>
                </div>
            </div>
        </div>
    </div>

<script>


        // Initialize experiences with data from the backend
        window.experiences = [
          {% for experience in additional_info.experience_details.all %}
          {
            id: {{ experience.id }},
            designation: "{{ experience.designation|escapejs }}",
            company: "{{ experience.company|escapejs }}",
            startDate: "{{ experience.start_date|date:'Y-m-d' }}",
            endDate: "{{ experience.end_date|date:'Y-m-d'|default:'' }}",
            currentlyWorking: {{ experience.currently_working|yesno:"true,false" }},
          },
          {% endfor %}
        ];
      
        function toggleEndDate() {
          const currentlyWorking = document.getElementById('currentlyWorking').checked;
          document.getElementById('endDate').disabled = currentlyWorking;
          if (currentlyWorking) document.getElementById('endDate').value = '';
        }
      
        function openAddModal() {
          document.getElementById('experienceId').value = '';
          document.getElementById('designation').value = '';
          document.getElementById('company').value = '';
          document.getElementById('startDate').value = '';
          document.getElementById('endDate').value = '';
          document.getElementById('currentlyWorking').checked = false;
          toggleEndDate();
        }
      
        function openEditModal(index) {
          const experience = experiences[index];
          document.getElementById('experienceId').value = index;
          document.getElementById('designation').value = experience.designation;
          document.getElementById('company').value = experience.company;
          document.getElementById('startDate').value = experience.startDate;
          document.getElementById('endDate').value = experience.endDate || '';
          document.getElementById('currentlyWorking').checked = experience.currentlyWorking;
          toggleEndDate();
          const modal = new bootstrap.Modal(document.getElementById('experienceModal'));
          modal.show();
        }
      
        function saveExperience() {
          const id = document.getElementById('experienceId').value;
          const designation = document.getElementById('designation').value;
          const company = document.getElementById('company').value;
          const startDate = document.getElementById('startDate').value;
          const currentlyWorking = document.getElementById('currentlyWorking').checked;
          const endDate = currentlyWorking ? null : document.getElementById('endDate').value;
      
          if (id) {
            experiences[id] = { designation, company, startDate, endDate, currentlyWorking };
          } else {
            experiences.push({ designation, company, startDate, endDate, currentlyWorking });
          }
          
          const modal = bootstrap.Modal.getInstance(document.getElementById('experienceModal'));
          modal.hide();
      
          renderExperienceList();
          calculateTotalExperience();
        }
      
        function deleteExperience(index) {
          experiences.splice(index, 1);
          renderExperienceList();
          calculateTotalExperience();
        }
      
        function renderExperienceList() {
          const experienceList = document.getElementById('experienceList');
          experienceList.innerHTML = '';
          if (experiences.length === 0) {
            experienceList.innerHTML = '<li class="list-group-item-experience text-center" style="list-style-type:none;">No experience details found. Add your first experience!</li>';
            return;
          }
          experiences.sort((a, b) => {
            // If one experience is currently working, it should come first
            if (a.currentlyWorking && !b.currentlyWorking) return -1;
            if (!a.currentlyWorking && b.currentlyWorking) return 1;
        
            // Otherwise, sort by start date (most recent first)
            return new Date(b.startDate) - new Date(a.startDate);
          });
      
          experiences.forEach((experience, index) => {
            const start = new Date(experience.startDate);
            const end = experience.currentlyWorking ? new Date() : new Date(experience.endDate || new Date());
      
            const totalMonths = (end.getFullYear() - start.getFullYear()) * 12 + (end.getMonth() - start.getMonth());
            const years = Math.floor(totalMonths / 12);
            const months = totalMonths % 12;
      
            const duration = `${years > 0 ? `${years} year${years > 1 ? 's' : ''} ` : ''}${months > 0 ? `${months} month${months > 1 ? 's' : ''}` : ''}`.trim();
      
            const listItem = document.createElement('li');
            listItem.className = 'list-group-item-experience mb-2 d-flex justify-content-between align-items-center';
            listItem.innerHTML = `
              <div>
                <strong>${experience.designation}</strong> at ${experience.company}
                (${experience.startDate} to ${experience.currentlyWorking ? 'Present' : experience.endDate})
                <span class="text-muted">[${duration}]</span>
              </div>
              <div>
                <button type="button" class="btn btn-sm btn-warning me-2" onclick="openEditModal(${index})">Edit</button>
                <button type="button" class="btn btn-sm btn-danger" onclick="deleteExperience(${index})">Delete</button>
              </div>
            `;
            experienceList.appendChild(listItem);
          });
        }
      
        function calculateTotalExperience() {
          let totalMonths = 0;
      
          experiences.forEach((experience) => {
            const start = new Date(experience.startDate);
            const end = experience.currentlyWorking ? new Date() : new Date(experience.endDate || new Date());
      
            const months = (end.getFullYear() - start.getFullYear()) * 12 + (end.getMonth() - start.getMonth());
            totalMonths += months;
          });
      
          const years = Math.floor(totalMonths / 12);
          const months = totalMonths % 12;
      
          document.getElementById('experience').value = `${years} years ${months} months`;
        }
      
        // Initial rendering
        renderExperienceList();
        calculateTotalExperience();
      

        // Initialize education data with data from the backend
window.educations = [
    {% for education in additional_info.education_details.all %}
    {
      id: {{ education.id }},
      schoolInstitute: "{{ education.instituteName|escapejs }}",
      qualification: "{{ education.qualification|escapejs }}",
      yearOfPassing: "{{ education.yearOfPassing }}",
    },
    {% endfor %}
  ];
  
  function openAddEducationModal() {
    document.getElementById('educationId').value = '';
    document.getElementById('schoolInstitute').value = '';
    document.getElementById('qualification').value = '';
    document.getElementById('yearOfPassing').value = '';
  }
  
  function openEditEducationModal(index) {
    const education = educations[index];
    document.getElementById('educationId').value = index;
    document.getElementById('schoolInstitute').value = education.schoolInstitute;
    document.getElementById('qualification').value = education.qualification;
    document.getElementById('yearOfPassing').value = education.yearOfPassing;
  
    const modal = new bootstrap.Modal(document.getElementById('educationModal'));
    modal.show();
  }
  
  function saveEducation() {
    const id = document.getElementById('educationId').value;
    const schoolInstitute = document.getElementById('schoolInstitute').value;
    const qualification = document.getElementById('qualification').value;
    const yearOfPassing = document.getElementById('yearOfPassing').value;
  
    if (!schoolInstitute || !qualification || !yearOfPassing) {
      alert('All fields are required!');
      return;
    }
  
    if (id) {
      educations[id] = { schoolInstitute, qualification, yearOfPassing };
    } else {
      educations.push({ schoolInstitute, qualification, yearOfPassing });
    }
  
    const modal = bootstrap.Modal.getInstance(document.getElementById('educationModal'));
    modal.hide();
  
    renderEducationList();
  }
  
  function deleteEducation(index) {
    educations.splice(index, 1);
    renderEducationList();
  }
  
  function renderEducationList() {
    const educationList = document.getElementById('educationList');
    educationList.innerHTML = '';
  
    if (educations.length === 0) {
      educationList.innerHTML = '<li class="list-group-item-education text-center" style="list-style-type:none;">No education details found. Add your first education!</li>';
      return;
    }
  
    educations.forEach((education, index) => {
      const listItem = document.createElement('li');
      listItem.className = 'list-group-item-education mb-2 d-flex justify-content-between align-items-center';
      listItem.innerHTML = `
        <div>
          <strong>${education.qualification}</strong> from ${education.schoolInstitute} 
          (Year of Passing: ${education.yearOfPassing})
        </div>
        <div>
          <button type="button" class="btn btn-sm btn-warning me-2" onclick="openEditEducationModal(${index})">Edit</button>
          <button type="button" class="btn btn-sm btn-danger" onclick="deleteEducation(${index})">Delete</button>
        </div>
      `;
      educationList.appendChild(listItem);
    });
  }
  
  // Initial rendering
  renderEducationList();
  
    // Add event listeners for all fields with maxlength
document.addEventListener("DOMContentLoaded", function() {
    const inputs = document.querySelectorAll("input[maxlength], textarea[maxlength]");
    inputs.forEach(input => {
        input.addEventListener("input", function() {
            console.log("inputting")
            const maxLength = parseInt(this.getAttribute("maxlength"), 10);
            console.log(maxLength);
            console.log(this.value.length);
                if (this.value.length >= maxLength) {
                   
                    alert(`Maximum length of ${maxLength} characters exceeded!`);
                    this.value = this.value.slice(0, maxLength); // Truncate to the max length
            }
        });
    });
});





 // Function to add a new book entry
 document.getElementById('addAwardBtn').addEventListener('click', function () {
    const awardEntries = document.querySelectorAll('.award-entry');
    let canAddAward = true;

    // Validate all existing entries
    awardEntries.forEach(entry => {
        // Check existing fields
        const existingAwardName = entry.querySelector('input[name="existing_award_name[]"]');
        const existingAwardYear = entry.querySelector('input[name="existing_award_year[]"]');
        const existingAwardCategory = entry.querySelector('input[name="existing_award_category[]"]');

        const existingAwardSubCategory = entry.querySelector('input[name="existing_award_sub_category[]"]');

        const existingAwardByOrganisation = entry.querySelector('input[name="existing_award_by_organisation[]"]');

        const existingAwardImages = entry.querySelector('input[name="existing_award_images[]"]');

        // Check new fields
        const awardName = entry.querySelector('input[name="award_name[]"]');
        const awardYear = entry.querySelector('input[name="award_year[]"]');
        const awardCategory = entry.querySelector('input[name="award_category[]"]');
        const awardSubCategory = entry.querySelector('input[name="award_sub_category[]"]');

        const awardByOrganisation = entry.querySelector('input[name="award_by_organisation[]"]');

        const awardImageFiles = entry.querySelector('input[name="award_images[]"]');

        // Validation logic for each entry
        if (
            (!existingAwardName || existingAwardName.value.trim() === '') &&
            (!awardName || awardName.value.trim() === '') // Either existing or new name should be filled
        ) {
            canAddAward = false;
        }

        if (
            (!existingAwardYear || existingAwardYear.value.trim() === '') &&
            (!awardYear || awardYear.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddAward = false;
        }
        if (
            (!existingAwardCategory || existingAwardCategory.value.trim() === '') &&
            (!awardCategory || awardCategory.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddAward = false;
        }
        if (
            (!existingAwardSubCategory || existingAwardSubCategory.value.trim() === '') &&
            (!awardSubCategory || awardSubCategory.value.trim() === '') // Either existing or new link should be filled
        ) {
            canAddAward = false;
        }
        if (
            (!existingAwardByOrganisation || existingAwardByOrganisation.value.trim() === '') &&
            (!awardByOrganisation || awardByOrganisation.value.trim() === '') 
        ) {
            canAddAward = false;
        }


        
    });

    // If validation passes, allow adding a new book entry
    if (canAddAward) {
        const awardsSection = document.getElementById('awardsSection');
        const newAwardEntry = document.createElement('div');
        newAwardEntry.classList.add('award-entry', 'mb-2');

        newAwardEntry.innerHTML = `
            <input type="text" name="award_name[]" class="form-control mb-1" placeholder="Enter award name" maxlength="85">
            <input type="text" name="award_year[]" class="form-control mb-1" placeholder="Enter award year">
            <input type="text" name="award_category[]" class="form-control mb-1" placeholder="Enter award category">
            <input type="text" name="award_sub_category[]" class="form-control mb-1" placeholder="Enter award sub category">
            <input type="text" name="award_by_organisation[]" class="form-control mb-1" placeholder="Enter award by organisation">
            <input type="file" name="award_images[]" class="form-control mb-1" accept="image/*" multiple>
            <button type="button" class="remove-award-btn btn btn-danger btn-sm">Remove</button>
        `;

        awardsSection.appendChild(newAwardEntry);
    } else {
        alert("Please ensure all fields (name, year,organisation,category,sub category and image) are filled in existing entries before adding a new award.");
    }
});

// Function to remove a book entry
document.getElementById('awardsSection').addEventListener('click', function (e) {
    if (e.target && e.target.classList.contains('remove-award-btn')) {
        e.target.parentElement.remove();
    }
});



// Handle the "Remove" button click event
document.querySelectorAll('.remove-existing-award-btn').forEach(button => {
    button.addEventListener('click', function() {
        var awardEntry = this.closest('.award-entry');
        var awardId = awardEntry ? awardEntry.dataset.awardId : null;  // Get the book ID
        console.log("clicked")
        console.log(awardId)
        if (awardId) {
            // Make an AJAX call to delete the book
            $.ajax({
                url: `/remove-award/${awardId}/`, // Backend endpoint for deletion
                type: 'DELETE', // HTTP DELETE request
                headers: {
                    'Content-Type': 'application/json', // Optional if not sending data
                },
                success: function(response) {
                    // On success, remove the book entry from the DOM
                    awardEntry.remove();
                    console.log('Award removed successfully.');
                },
                error: function(xhr, status, error) {
                    console.error('Error removing award:', error);
                    alert('Failed to remove the award.');
                }
            });
        } else {
            console.error('Award ID is missing.');
        }
    });
});
   
</script>

<!-- Preview Modal (or section) -->
<div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="previewModalLabel">Profile Preview</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- Preview content will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}