{%load static %}
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <title>Jobnova - Job Board & Job Portal Bootstrap 5 Template</title>
	    <meta name="description" content="Job Listing Bootstrap 5 Template" />
	    <meta name="keywords" content="Onepage, creative, modern, bootstrap 5, multipurpose, clean, Job Listing, Job Board, Job, Job Portal" />
	    <meta name="author" content="Shreethemes" />
	    <meta name="website" content="https://shreethemes.in" />
	    <meta name="email" content="support@shreethemes.in" />
	    <meta name="version" content="1.0.0" />
	    <!-- favicon -->
        <link href="{% static 'images/favicon.ico' %}" rel="shortcut icon">
		<!-- Bootstrap core CSS -->
	    <link href="{% static 'css/bootstrap.min.css' %}" type="text/css" rel="stylesheet" />
        <link href="{% static 'css/materialdesignicons.min.css' %}" rel="stylesheet" type="text/css" />
	    <!-- Custom  Css -->
	    <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" id="theme-opt" />
        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
        <!-- Style css -->

<style>
    @media (min-width: 768px) {
        #Signupform_container{
            height: 90vh;
             overflow-y: auto;
             scrollbar-width: none;
              -ms-overflow-style: none;
              max-width: 100%;
            
        }
       
      }
</style>
    </head>

    <body>        
        <section class="bg-home d-flex align-items-center" style="background: url('{% static 'images/hero/bg3.jpg' %}') center;">
            <div class="bg-overlay bg-linear-gradient-2"></div>
            <div class="container">
                <div class="row justify-content-center align-items-center" style="height: 100vh;">
                    <div class="col-lg-4 col-md-5 col-12">
                        <div class="p-4 bg-white rounded shadow-md mx-auto w-100" id="Signupform_container">
                            <form id ="signupForm">
                                <a href="{% url 'index' %}"><img src="{% static 'images/logo-dark.png' %}" class="mb-4 d-block mx-auto" alt=""></a>
                                <h6 class="mb-3 text-uppercase fw-semibold">Register your account</h6>
                            
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Your Name</label>
                                    <input name="name" id="name" type="text" class="form-control" placeholder="Enter your name" required>
                                </div>
    
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Your Email</label>
                                    <input name="email" id="email" type="email" class="form-control" placeholder="Enter your email" required>
                                </div>
    
                                <div class="mb-3">
                                    <label class="form-label fw-semibold" for="contact">Contact Number</label>
                                    <input type="tel" class="form-control" id="contact" placeholder="Enter your contact number" required pattern="[0-9]{10}">
                                </div>
    
                                <div class="mb-3">
                                    <label class="form-label fw-semibold" for="loginpass">Password</label>
                                    <input type="password" class="form-control" id="password" placeholder="Password" required>
                                </div>
    
                                <div class="mb-3">
                                    <label class="form-label fw-semibold" for="confirmpass">Confirm Password</label>
                                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password" required>
                                </div>
                                
                                <div class="g-recaptcha" data-sitekey="6LeAV5oqAAAAAGvSIJX-vuouZSzXMljjRzmGEk6u"></div>
                                <input type="hidden" name="recaptcha_token" id="recaptcha_token">
    
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" required>
                                    <label class="form-label form-check-label text-muted" for="flexCheckDefault">I Accept <a href="#" class="text-primary">Terms And Condition</a></label>
                                </div>
                        
                                <button class="btn btn-primary w-100" type="submit">Register</button>
    
                                <div class="col-12 text-center mt-3">
                                    <span><span class="text-muted small me-2">Already have an account ? </span> <a href="{% url 'login' %}" class="text-dark fw-semibold small">Sign in</a></span>
                                </div><!--end col-->
                            </form>
                        </div>
                    </div><!--end col-->
                </div><!--end row-->
            </div><!--end container-->
        </section><!--end section-->
        <!-- ENd Hero -->
        
        <!-- javascript -->
        <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
        <script src="{% static 'js/feather.min.js' %}"></script>
        <!-- Custom -->
        <script src="{% static 'js/plugins.init.js' %}"></script>
        <script src="{% static 'js/app.js' %}"></script>
        <!-- jQuery CDN -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<!-- Toastr JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>

$(document).ready(function() {
    $('#signupForm').on('submit', function(event) {

        event.preventDefault();
    
        var name = document.getElementById("name").value;
            var email = document.getElementById("email").value;
            var contact_number = document.getElementById("contact").value;
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirmPassword").value;
            var recaptcha_token = grecaptcha.getResponse();
        

            if (!name || !email || !contact_number || !name || !password || !confirmPassword){
            alert("Please fill all the details")
            return;
            }
            if(!recaptcha_token){
                alert('Please complete the reCAPTCHA.');
                return;
            }
            if (password !== confirmPassword) {
                alert("Passwords do not match. Please try again.");
                return;  
            }

        var formData = new FormData();

        formData.append('name', name);
        formData.append('contact_number', contact_number);
        formData.append('email', email);
        formData.append('password', password);
        formData.append('password2', confirmPassword);
        formData.append('recaptcha_token', recaptcha_token);
        

        // Send data via AJAX
        $.ajax({
            url: '/signup_api/',
            type: 'POST',
            data: formData,
            processData: false, 
            contentType: false,
            success: function(response) {
                toastr.success('Registration successful!', 'Success');

                const inputFields = ["name", "contact","email", "password", "confirmPassword"];
                inputFields.forEach(fieldId => {
                    document.getElementById(fieldId).value = "";
                  
                });
            },
            error: function(xhr) {
                var errors = xhr.responseJSON;
                var firstKey = Object.keys(errors)[0];
                var firstError = errors[firstKey][0];
                toastr.error(firstError, 'Error');

                if (errors) {
                    grecaptcha.reset();  
               
                }
            }
        });
    });



});
             

</script>
    </body>
    

</html>